import { ToastType } from './toast-type.enum';
import { Component, input } from '@angular/core';
import { Subject } from 'rxjs';
import { takeUntil } from 'rxjs/operators';
import { trigger, style, animate, transition } from '@angular/animations';
import { ToasterPosition } from './toaster-position.enum';
import * as i0 from "@angular/core";
import * as i1 from "./ng-toast.service";
import * as i2 from "@angular/common";
import * as i3 from "./toast-icon.directive";
export class NgToastComponent {
    constructor(toastService) {
        this.toastService = toastService;
        this.position = input(ToasterPosition.BOTTOM_RIGHT);
        this.width = input(350);
        this.ToastType = ToastType;
        this._toasterSubject$ = new Subject();
        this.messages = [];
    }
    ngOnInit() {
        this.toastService.onToastMessage()
            .pipe(takeUntil(this._toasterSubject$))
            .subscribe(message => this._handleToastMessage(message));
    }
    _handleToastMessage(message) {
        if (this._isToasterPositionTop()) {
            this.messages.unshift(message);
        }
        else {
            this.messages.push(message);
        }
        setTimeout(() => this._removeMessage(message), message.duration);
    }
    _isToasterPositionTop() {
        return this.position() === ToasterPosition.TOP_LEFT ||
            this.position() === ToasterPosition.TOP_CENTER ||
            this.position() === ToasterPosition.TOP_RIGHT;
    }
    _removeMessage(message) {
        const index = this.messages.findIndex(e => e.id === message.id);
        if (index > -1) {
            this.messages.splice(index, 1);
        }
    }
    remove(message) {
        this._removeMessage(message);
    }
    ngOnDestroy() {
        this._toasterSubject$.next();
        this._toasterSubject$.complete();
    }
    static { this.ɵfac = i0.ɵɵngDeclareFactory({ minVersion: "12.0.0", version: "18.0.1", ngImport: i0, type: NgToastComponent, deps: [{ token: i1.NgToastService }], target: i0.ɵɵFactoryTarget.Component }); }
    static { this.ɵcmp = i0.ɵɵngDeclareComponent({ minVersion: "17.0.0", version: "18.0.1", type: NgToastComponent, selector: "ng-toast", inputs: { position: { classPropertyName: "position", publicName: "position", isSignal: true, isRequired: false, transformFunction: null }, width: { classPropertyName: "width", publicName: "width", isSignal: true, isRequired: false, transformFunction: null } }, ngImport: i0, template: "<div style.min-width=\"{{width()}}px\" style.max-width=\"{{width()}}px\" class=\"toaster\" [ngClass]=\"position()\">\n\n  <div class=\"toast-message\" *ngFor=\"let message of messages\" [ngClass]=\"message.type\" [@showHide]>\n    <div class=\"flex-start-center gap-3\">\n      <div [ngClass]=\"message.type\" class=\"toast-icon\">\n        <div [toastIcon]=\"message.type\" class=\"toast-icon\"></div>\n      </div>\n      <div class=\"flex-col\">\n        @if (message.title && message.title !== '') {\n          <span class=\"msg-title\">{{message.title}}</span>\n        }\n        <span style.max-width=\"{{width() - 30}}px\" class=\"msg-summary\">{{message.message}}</span>\n      </div>\n    </div>\n    <button (click)=\"remove(message)\" [ngClass]=\"message.type\" class=\"cross-icon\">\n      <svg width=\"10\" height=\"10\" viewBox=\"0 0 14 14\" fill=\"none\" class=\"p-icon p-toast-icon-close-icon\"\n        aria-hidden=\"true\">\n        <path\n          d=\"M8.01186 7.00933L12.27 2.75116C12.341 2.68501 12.398 2.60524 12.4375 2.51661C12.4769 2.42798 12.4982 2.3323 12.4999 2.23529C12.5016 2.13827 12.4838 2.0419 12.4474 1.95194C12.4111 1.86197 12.357 1.78024 12.2884 1.71163C12.2198 1.64302 12.138 1.58893 12.0481 1.55259C11.9581 1.51625 11.8617 1.4984 11.7647 1.50011C11.6677 1.50182 11.572 1.52306 11.4834 1.56255C11.3948 1.60204 11.315 1.65898 11.2488 1.72997L6.99067 5.98814L2.7325 1.72997C2.59553 1.60234 2.41437 1.53286 2.22718 1.53616C2.03999 1.53946 1.8614 1.61529 1.72901 1.74767C1.59663 1.88006 1.5208 2.05865 1.5175 2.24584C1.5142 2.43303 1.58368 2.61419 1.71131 2.75116L5.96948 7.00933L1.71131 11.2675C1.576 11.403 1.5 11.5866 1.5 11.7781C1.5 11.9696 1.576 12.1532 1.71131 12.2887C1.84679 12.424 2.03043 12.5 2.2219 12.5C2.41338 12.5 2.59702 12.424 2.7325 12.2887L6.99067 8.03052L11.2488 12.2887C11.3843 12.424 11.568 12.5 11.7594 12.5C11.9509 12.5 12.1346 12.424 12.27 12.2887C12.4053 12.1532 12.4813 11.9696 12.4813 11.7781C12.4813 11.5866 12.4053 11.403 12.27 11.2675L8.01186 7.00933Z\"\n          fill=\"currentColor\"></path>\n      </svg></button>\n  </div>\n</div>\n", styles: [".toaster{position:fixed;z-index:999;min-width:400px;max-width:400px;font-family:sans-serif}.toaster .toast-message{padding:1rem;margin-bottom:1rem;border-radius:6px;border:1px solid;word-break:break-all;display:flex;justify-content:space-between;align-items:center;word-break:break-word}.toaster .toast-message:last-child{margin-bottom:0}.toaster .toast-message.toast-primary{background:#e9e9ff;color:#2599bb}.toaster .toast-message.toast-secondary{background:#627fa2;color:#283443}.toaster .toast-message.toast-success{background:#e4f8f0;color:#34b189}.toaster .toast-message.toast-info{background:#ebebff;color:#787aff}.toaster .toast-message.toast-warning{background:#fff2e2;color:#ffc120}.toaster .toast-message.toast-danger{background:#ffe7e7;color:#ff7070}.toaster .toast-message .msg-title{font-size:1rem;color:#000;font-weight:600;word-break:break-word;max-width:240px}.toaster .toast-message .msg-summary{font-size:.9rem;color:#626262;font-weight:400;word-break:break-word;line-height:1.2rem}.toaster.toaster-top-left{margin-top:1rem;margin-left:1rem;top:0;left:0}.toaster.toaster-top-center{margin-top:1rem;top:0;left:50%;transform:translate(-50%)}.toaster.toaster-top-right{margin-top:1rem;margin-right:1rem;top:0;right:0}.toaster.toaster-bottom-left{margin-bottom:1rem;margin-left:1rem;bottom:0;left:0}.toaster.toaster-bottom-center{margin-bottom:1rem;bottom:0;left:50%;transform:translate(-50%)}.toaster.toaster-bottom-right{margin-bottom:1rem;margin-right:1rem;bottom:0;right:0}@media (max-width: 478px){.toaster{margin-left:0!important;margin-right:0!important;left:50%!important;transform:translate(-50%)!important;min-width:300px!important;max-width:300px}}.flex-start-center{display:flex;justify-content:flex-start;align-items:center}.gap-3{gap:10px}.p-icon{width:1rem;height:1rem}.toast-icon{border-radius:50%;color:#fff;padding:2px;display:flex;justify-content:center;align-items:center}.toast-icon.toast-success,.toast-icon.toast-primary,.toast-icon.toast-secondary{background:#34b189}.toast-icon.toast-info{background:#787aff}.toast-icon.toast-warning{background:#ffc120}.toast-icon.toast-danger{background:#ff6767}.cross-icon{background:transparent;outline:none;border:none;cursor:pointer}.cross-icon.toast-success,.cross-icon.toast-primary,.cross-icon.toast-secondary{color:#34b189}.cross-icon.toast-info{color:#787aff}.cross-icon.toast-warning{color:#ffc120}.cross-icon.toast-danger{color:#ff6767}.flex-col{display:flex;flex-direction:column;gap:.375rem}\n"], dependencies: [{ kind: "directive", type: i2.NgClass, selector: "[ngClass]", inputs: ["class", "ngClass"] }, { kind: "directive", type: i2.NgForOf, selector: "[ngFor][ngForOf]", inputs: ["ngForOf", "ngForTrackBy", "ngForTemplate"] }, { kind: "directive", type: i3.ToastIconDirective, selector: "[toastIcon]", inputs: ["toastIcon"] }], animations: [trigger('showHide', [
                transition(':enter', [
                    style({
                        opacity: 0,
                        transform: 'scaleX(0.98) scaleY(0)',
                        position: 'relative'
                    }),
                    animate('250ms', style({
                        opacity: 1,
                        transform: 'scale(1)'
                    }))
                ]),
                transition(':leave', [
                    style({
                        opacity: 1,
                        transform: 'scale(1)'
                    }),
                    animate('250ms', style({
                        opacity: 0,
                        transform: 'scaleX(0.98) scaleY(0)'
                    }))
                ])
            ])] }); }
}
i0.ɵɵngDeclareClassMetadata({ minVersion: "12.0.0", version: "18.0.1", ngImport: i0, type: NgToastComponent, decorators: [{
            type: Component,
            args: [{ selector: 'ng-toast', animations: [trigger('showHide', [
                            transition(':enter', [
                                style({
                                    opacity: 0,
                                    transform: 'scaleX(0.98) scaleY(0)',
                                    position: 'relative'
                                }),
                                animate('250ms', style({
                                    opacity: 1,
                                    transform: 'scale(1)'
                                }))
                            ]),
                            transition(':leave', [
                                style({
                                    opacity: 1,
                                    transform: 'scale(1)'
                                }),
                                animate('250ms', style({
                                    opacity: 0,
                                    transform: 'scaleX(0.98) scaleY(0)'
                                }))
                            ])
                        ])], template: "<div style.min-width=\"{{width()}}px\" style.max-width=\"{{width()}}px\" class=\"toaster\" [ngClass]=\"position()\">\n\n  <div class=\"toast-message\" *ngFor=\"let message of messages\" [ngClass]=\"message.type\" [@showHide]>\n    <div class=\"flex-start-center gap-3\">\n      <div [ngClass]=\"message.type\" class=\"toast-icon\">\n        <div [toastIcon]=\"message.type\" class=\"toast-icon\"></div>\n      </div>\n      <div class=\"flex-col\">\n        @if (message.title && message.title !== '') {\n          <span class=\"msg-title\">{{message.title}}</span>\n        }\n        <span style.max-width=\"{{width() - 30}}px\" class=\"msg-summary\">{{message.message}}</span>\n      </div>\n    </div>\n    <button (click)=\"remove(message)\" [ngClass]=\"message.type\" class=\"cross-icon\">\n      <svg width=\"10\" height=\"10\" viewBox=\"0 0 14 14\" fill=\"none\" class=\"p-icon p-toast-icon-close-icon\"\n        aria-hidden=\"true\">\n        <path\n          d=\"M8.01186 7.00933L12.27 2.75116C12.341 2.68501 12.398 2.60524 12.4375 2.51661C12.4769 2.42798 12.4982 2.3323 12.4999 2.23529C12.5016 2.13827 12.4838 2.0419 12.4474 1.95194C12.4111 1.86197 12.357 1.78024 12.2884 1.71163C12.2198 1.64302 12.138 1.58893 12.0481 1.55259C11.9581 1.51625 11.8617 1.4984 11.7647 1.50011C11.6677 1.50182 11.572 1.52306 11.4834 1.56255C11.3948 1.60204 11.315 1.65898 11.2488 1.72997L6.99067 5.98814L2.7325 1.72997C2.59553 1.60234 2.41437 1.53286 2.22718 1.53616C2.03999 1.53946 1.8614 1.61529 1.72901 1.74767C1.59663 1.88006 1.5208 2.05865 1.5175 2.24584C1.5142 2.43303 1.58368 2.61419 1.71131 2.75116L5.96948 7.00933L1.71131 11.2675C1.576 11.403 1.5 11.5866 1.5 11.7781C1.5 11.9696 1.576 12.1532 1.71131 12.2887C1.84679 12.424 2.03043 12.5 2.2219 12.5C2.41338 12.5 2.59702 12.424 2.7325 12.2887L6.99067 8.03052L11.2488 12.2887C11.3843 12.424 11.568 12.5 11.7594 12.5C11.9509 12.5 12.1346 12.424 12.27 12.2887C12.4053 12.1532 12.4813 11.9696 12.4813 11.7781C12.4813 11.5866 12.4053 11.403 12.27 11.2675L8.01186 7.00933Z\"\n          fill=\"currentColor\"></path>\n      </svg></button>\n  </div>\n</div>\n", styles: [".toaster{position:fixed;z-index:999;min-width:400px;max-width:400px;font-family:sans-serif}.toaster .toast-message{padding:1rem;margin-bottom:1rem;border-radius:6px;border:1px solid;word-break:break-all;display:flex;justify-content:space-between;align-items:center;word-break:break-word}.toaster .toast-message:last-child{margin-bottom:0}.toaster .toast-message.toast-primary{background:#e9e9ff;color:#2599bb}.toaster .toast-message.toast-secondary{background:#627fa2;color:#283443}.toaster .toast-message.toast-success{background:#e4f8f0;color:#34b189}.toaster .toast-message.toast-info{background:#ebebff;color:#787aff}.toaster .toast-message.toast-warning{background:#fff2e2;color:#ffc120}.toaster .toast-message.toast-danger{background:#ffe7e7;color:#ff7070}.toaster .toast-message .msg-title{font-size:1rem;color:#000;font-weight:600;word-break:break-word;max-width:240px}.toaster .toast-message .msg-summary{font-size:.9rem;color:#626262;font-weight:400;word-break:break-word;line-height:1.2rem}.toaster.toaster-top-left{margin-top:1rem;margin-left:1rem;top:0;left:0}.toaster.toaster-top-center{margin-top:1rem;top:0;left:50%;transform:translate(-50%)}.toaster.toaster-top-right{margin-top:1rem;margin-right:1rem;top:0;right:0}.toaster.toaster-bottom-left{margin-bottom:1rem;margin-left:1rem;bottom:0;left:0}.toaster.toaster-bottom-center{margin-bottom:1rem;bottom:0;left:50%;transform:translate(-50%)}.toaster.toaster-bottom-right{margin-bottom:1rem;margin-right:1rem;bottom:0;right:0}@media (max-width: 478px){.toaster{margin-left:0!important;margin-right:0!important;left:50%!important;transform:translate(-50%)!important;min-width:300px!important;max-width:300px}}.flex-start-center{display:flex;justify-content:flex-start;align-items:center}.gap-3{gap:10px}.p-icon{width:1rem;height:1rem}.toast-icon{border-radius:50%;color:#fff;padding:2px;display:flex;justify-content:center;align-items:center}.toast-icon.toast-success,.toast-icon.toast-primary,.toast-icon.toast-secondary{background:#34b189}.toast-icon.toast-info{background:#787aff}.toast-icon.toast-warning{background:#ffc120}.toast-icon.toast-danger{background:#ff6767}.cross-icon{background:transparent;outline:none;border:none;cursor:pointer}.cross-icon.toast-success,.cross-icon.toast-primary,.cross-icon.toast-secondary{color:#34b189}.cross-icon.toast-info{color:#787aff}.cross-icon.toast-warning{color:#ffc120}.cross-icon.toast-danger{color:#ff6767}.flex-col{display:flex;flex-direction:column;gap:.375rem}\n"] }]
        }], ctorParameters: () => [{ type: i1.NgToastService }] });
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoibmctdG9hc3QuY29tcG9uZW50LmpzIiwic291cmNlUm9vdCI6IiIsInNvdXJjZXMiOlsiLi4vLi4vLi4vLi4vcHJvamVjdHMvbmctdG9hc3Qvc3JjL2xpYi9uZy10b2FzdC5jb21wb25lbnQudHMiLCIuLi8uLi8uLi8uLi9wcm9qZWN0cy9uZy10b2FzdC9zcmMvbGliL25nLXRvYXN0LmNvbXBvbmVudC5odG1sIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiJBQUFBLE9BQU8sRUFBRSxTQUFTLEVBQUUsTUFBTSxtQkFBbUIsQ0FBQztBQUM5QyxPQUFPLEVBQUUsU0FBUyxFQUE0QixLQUFLLEVBQUUsTUFBTSxlQUFlLENBQUM7QUFDM0UsT0FBTyxFQUFFLE9BQU8sRUFBRSxNQUFNLE1BQU0sQ0FBQztBQUMvQixPQUFPLEVBQUUsU0FBUyxFQUFFLE1BQU0sZ0JBQWdCLENBQUM7QUFHM0MsT0FBTyxFQUFFLE9BQU8sRUFBRSxLQUFLLEVBQUUsT0FBTyxFQUFFLFVBQVUsRUFBRSxNQUFNLHFCQUFxQixDQUFDO0FBQzFFLE9BQU8sRUFBRSxlQUFlLEVBQUUsTUFBTSx5QkFBeUIsQ0FBQzs7Ozs7QUFnQzFELE1BQU0sT0FBTyxnQkFBZ0I7SUFTM0IsWUFBb0IsWUFBNEI7UUFBNUIsaUJBQVksR0FBWixZQUFZLENBQWdCO1FBUGhELGFBQVEsR0FBRyxLQUFLLENBQWtCLGVBQWUsQ0FBQyxZQUFZLENBQUMsQ0FBQztRQUNoRSxVQUFLLEdBQUcsS0FBSyxDQUFTLEdBQUcsQ0FBQyxDQUFDO1FBQzNCLGNBQVMsR0FBRyxTQUFTLENBQUM7UUFNcEIsSUFBSSxDQUFDLGdCQUFnQixHQUFHLElBQUksT0FBTyxFQUFRLENBQUM7UUFDNUMsSUFBSSxDQUFDLFFBQVEsR0FBRyxFQUFFLENBQUM7SUFDckIsQ0FBQztJQUVELFFBQVE7UUFDTixJQUFJLENBQUMsWUFBWSxDQUFDLGNBQWMsRUFBRTthQUMvQixJQUFJLENBQUMsU0FBUyxDQUFDLElBQUksQ0FBQyxnQkFBZ0IsQ0FBQyxDQUFD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LENBQUMsQ0FBQzs2QkFDSixDQUFDOzRCQUNGLFVBQVUsQ0FBQyxRQUFRLEVBQUU7Z0NBQ25CLEtBQUssQ0FBQztvQ0FDSixPQUFPLEVBQUUsQ0FBQztvQ0FDVixTQUFTLEVBQUUsVUFBVTtpQ0FDdEIsQ0FBQztnQ0FDRixPQUFPLENBQUMsT0FBTyxFQUFFLEtBQUssQ0FBQztvQ0FDckIsT0FBTyxFQUFFLENBQUM7b0NBQ1YsU0FBUyxFQUFFLHdCQUF3QjtpQ0FDcEMsQ0FBQyxDQUFDOzZCQUNKLENBQUM7eUJBQ0gsQ0FBQyxDQUFDIiwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgVG9hc3RUeXBlIH0gZnJvbSAnLi90b2FzdC10eXBlLmVudW0nO1xuaW1wb3J0IHsgQ29tcG9uZW50LCBPbkluaXQsIElucHV0LCBPbkRlc3Ryb3ksIGlucHV0IH0gZnJvbSAnQGFuZ3VsYXIvY29yZSc7XG5pbXBvcnQgeyBTdWJqZWN0IH0gZnJvbSAncnhqcyc7XG5pbXBvcnQgeyB0YWtlVW50aWwgfSBmcm9tICdyeGpzL29wZXJhdG9ycyc7XG5cbmltcG9ydCB7IFRvYXN0TWVzc2FnZSB9IGZyb20gJy4vdG9hc3QtbWVzc2FnZS5tb2RlbCc7XG5pbXBvcnQgeyB0cmlnZ2VyLCBzdHlsZSwgYW5pbWF0ZSwgdHJhbnNpdGlvbiB9IGZyb20gJ0Bhbmd1bGFyL2FuaW1hdGlvbnMnO1xuaW1wb3J0IHsgVG9hc3RlclBvc2l0aW9uIH0gZnJvbSAnLi90b2FzdGVyLXBvc2l0aW9uLmVudW0nO1xuaW1wb3J0IHsgTmdUb2FzdFNlcnZpY2UgfSBmcm9tICcuL25nLXRvYXN0LnNlcnZpY2UnO1xuXG5AQ29tcG9uZW50KHtcbiAgc2VsZWN0b3I6ICduZy10b2FzdCcsXG4gIHRlbXBsYXRlVXJsOiAnLi9uZy10b2FzdC5jb21wb25lbnQuaHRtbCcsXG4gIHN0eWxlVXJsczogWycuL25nLXRvYXN0LmNvbXBvbmVudC5zY3NzJ1xuICBdLFxuICBhbmltYXRpb25zOiBbdHJpZ2dlcignc2hvd0hpZGUnLCBbXG4gICAgdHJhbnNpdGlvbignOmVudGVyJywgW1xuICAgICAgc3R5bGUoe1xuICAgICAgICBvcGFjaXR5OiAwLFxuICAgICAgICB0cmFuc2Zvcm06ICdzY2FsZVgoMC45OCkgc2NhbGVZKDApJyxcbiAgICAgICAgcG9zaXRpb246ICdyZWxhdGl2ZSdcbiAgICAgIH0pLFxuICAgICAgYW5pbWF0ZSgnMjUwbXMnLCBzdHlsZSh7XG4gICAgICAgIG9wYWNpdHk6IDEsXG4gICAgICAgIHRyYW5zZm9ybTogJ3NjYWxlKDEpJ1xuICAgICAgfSkpXG4gICAgXSksXG4gICAgdHJhbnNpdGlvbignOmxlYXZlJywgW1xuICAgICAgc3R5bGUoe1xuICAgICAgICBvcGFjaXR5OiAxLFxuICAgICAgICB0cmFuc2Zvcm06ICdzY2FsZSgxKSdcbiAgICAgIH0pLFxuICAgICAgYW5pbWF0ZSgnMjUwbXMnLCBzdHlsZSh7XG4gICAgICAgIG9wYWNpdHk6IDAsXG4gICAgICAgIHRyYW5zZm9ybTogJ3NjYWxlWCgwLjk4KSBzY2FsZVkoMCknXG4gICAgICB9KSlcbiAgICBdKVxuICBdKV1cbn0pXG5leHBvcnQgY2xhc3MgTmdUb2FzdENvbXBvbmVudCBpbXBsZW1lbnRzIE9uSW5pdCB7XG5cbiAgcG9zaXRpb24gPSBpbnB1dDxUb2FzdGVyUG9zaXRpb24+KFRvYXN0ZXJQb3NpdGlvbi5CT1RUT01fUklHSFQpO1xuICB3aWR0aCA9IGlucHV0PG51bWJlcj4oMzUwKTtcbiAgVG9hc3RUeXBlID0gVG9hc3RUeXBlO1xuXG4gIHByaXZhdGUgX3RvYXN0ZXJTdWJqZWN0JDogU3ViamVjdDx2b2lkPjtcbiAgcHVibGljIG1lc3NhZ2VzOiBUb2FzdE1lc3NhZ2VbXTtcblxuICBjb25zdHJ1Y3Rvcihwcml2YXRlIHRvYXN0U2VydmljZTogTmdUb2FzdFNlcnZpY2UpIHtcbiAgICB0aGlzLl90b2FzdGVyU3ViamVjdCQgPSBuZXcgU3ViamVjdDx2b2lkPigpO1xuICAgIHRoaXMubWVzc2FnZXMgPSBbXTtcbiAgfVxuXG4gIG5nT25Jbml0KCk6IHZvaWQge1xuICAgIHRoaXMudG9hc3RTZXJ2aWNlLm9uVG9hc3RNZXNzYWdlKClcbiAgICAgIC5waXBlKHRha2VVbnRpbCh0aGlzLl90b2FzdGVyU3ViamVjdCQpKVxuICAgICAgLnN1YnNjcmliZShtZXNzYWdlID0+IHRoaXMuX2hhbmRsZVRvYXN0TWVzc2FnZShtZXNzYWdlKSlcbiAgfVxuXG4gIHByaXZhdGUgX2hhbmRsZVRvYXN0TWVzc2FnZShtZXNzYWdlOiBUb2FzdE1lc3NhZ2UpIHtcbiAgICBpZiAodGhpcy5faXNUb2FzdGVyUG9zaXRpb25Ub3AoKSkge1xuICAgICAgdGhpcy5tZXNzYWdlcy51bnNoaWZ0KG1lc3NhZ2UpO1xuICAgIH0gZWxzZSB7XG4gICAgICB0aGlzLm1lc3NhZ2VzLnB1c2gobWVzc2FnZSk7XG4gICAgfVxuICAgIHNldFRpbWVvdXQoKCkgPT4gdGhpcy5fcmVtb3ZlTWVzc2FnZShtZXNzYWdlKSwgbWVzc2FnZS5kdXJhdGlvbik7XG4gIH1cblxuICBwcml2YXRlIF9pc1RvYXN0ZXJQb3NpdGlvblRvcCgpIHtcbiAgICByZXR1cm4gdGhpcy5wb3NpdGlvbigpID09PSBUb2FzdGVyUG9zaXRpb24uVE9QX0xFRlQgfHxcbiAgICAgIHRoaXMucG9zaXRpb24oKSA9PT0gVG9hc3RlclBvc2l0aW9uLlRPUF9DRU5URVIgfHxcbiAgICAgIHRoaXMucG9zaXRpb24oKSA9PT0gVG9hc3RlclBvc2l0aW9uLlRPUF9SSUdIVDtcbiAgfVxuXG4gIHByaXZhdGUgX3JlbW92ZU1lc3NhZ2UobWVzc2FnZTogVG9hc3RNZXNzYWdlKSB7XG4gICAgY29uc3QgaW5kZXg6IG51bWJlciA9IHRoaXMubWVzc2FnZXMuZmluZEluZGV4KGUgPT4gZS5pZCA9PT0gbWVzc2FnZS5pZCk7XG4gICAgaWYgKGluZGV4ID4gLTEpIHtcbiAgICAgIHRoaXMubWVzc2FnZXMuc3BsaWNlKGluZGV4LCAxKTtcbiAgICB9XG4gIH1cblxuICByZW1vdmUobWVzc2FnZTogVG9hc3RNZXNzYWdlKXtcbiAgICB0aGlzLl9yZW1vdmVNZXNzYWdlKG1lc3NhZ2UpO1xuICB9XG5cbiAgbmdPbkRlc3Ryb3koKTogdm9pZCB7XG4gICAgdGhpcy5fdG9hc3RlclN1YmplY3QkLm5leHQoKTtcbiAgICB0aGlzLl90b2FzdGVyU3ViamVjdCQuY29tcGxldGUoKTtcbiAgfVxuXG59XG4iLCI8ZGl2IHN0eWxlLm1pbi13aWR0aD1cInt7d2lkdGgoKX19cHhcIiBzdHlsZS5tYXgtd2lkdGg9XCJ7e3dpZHRoKCl9fXB4XCIgY2xhc3M9XCJ0b2FzdGVyXCIgW25nQ2xhc3NdPVwicG9zaXRpb24oKVwiPlxuXG4gIDxkaXYgY2xhc3M9XCJ0b2FzdC1tZXNzYWdlXCIgKm5nRm9yPVwibGV0IG1lc3NhZ2Ugb2YgbWVzc2FnZXNcIiBbbmdDbGFzc109XCJtZXNzYWdlLnR5cGVcIiBbQHNob3dIaWRlXT5cbiAgICA8ZGl2IGNsYXNzPVwiZmxleC1zdGFydC1jZW50ZXIgZ2FwLTNcIj5cbiAgICAgIDxkaXYgW25nQ2xhc3NdPVwibWVzc2FnZS50eXBlXCIgY2xhc3M9XCJ0b2FzdC1pY29uXCI+XG4gICAgICAgIDxkaXYgW3RvYXN0SWNvbl09XCJtZXNzYWdlLnR5cGVcIiBjbGFzcz1cInRvYXN0LWljb25cIj48L2Rpdj5cbiAgICAgIDwvZGl2PlxuICAgICAgPGRpdiBjbGFzcz1cImZsZXgtY29sXCI+XG4gICAgICAgIEBpZiAobWVzc2FnZS50aXRsZSAmJiBtZXNzYWdlLnRpdGxlICE9PSAnJykge1xuICAgICAgICAgIDxzcGFuIGNsYXNzPVwibXNnLXRpdGxlXCI+e3ttZXNzYWdlLnRpdGxlfX08L3NwYW4+XG4gICAgICAgIH1cbiAgICAgICAgPHNwYW4gc3R5bGUubWF4LXdpZHRoPVwie3t3aWR0aCgpIC0gMzB9fXB4XCIgY2xhc3M9XCJtc2ctc3VtbWFyeVwiPnt7bWVzc2FnZS5tZXNzYWdlfX08L3NwYW4+XG4gICAgICA8L2Rpdj5cbiAgICA8L2Rpdj5cbiAgICA8YnV0dG9uIChjbGljayk9XCJyZW1vdmUobWVzc2FnZSlcIiBbbmdDbGFzc109XCJtZXNzYWdlLnR5cGVcIiBjbGFzcz1cImNyb3NzLWljb25cIj5cbiAgICAgIDxzdmcgd2lkdGg9XCIxMFwiIGhlaWdodD1cIjEwXCIgdmlld0JveD1cIjAgMCAxNCAxNFwiIGZpbGw9XCJub25lXCIgY2xhc3M9XCJwLWljb24gcC10b2FzdC1pY29uLWNsb3NlLWljb25cIlxuICAgICAgICBhcmlhLWhpZGRlbj1cInRydWVcIj5cbiAgICAgICAgPHBhdGhcbiAgICAgICAgICBkPVwiTTguMDExODYgNy4wMDkzM0wxMi4yNyAyLjc1MTE2QzEyLjM0MSAyLjY4NTAxIDEyLjM5OCAyLjYwNTI0IDEyLjQzNzUgMi41MTY2MUMxMi40NzY5IDIuNDI3OTggMTIuNDk4MiAyLjMzMjMgMTIuNDk5OSAyLjIzNTI5QzEyLjUwMTYgMi4xMzgyNyAxMi40ODM4IDIuMDQxOSAxMi40NDc0IDEuOTUxOTRDMTIuNDExMSAxLjg2MTk3IDEyLjM1NyAxLjc4MDI0IDEyLjI4ODQgMS43MTE2M0MxMi4yMTk4IDEuNjQzMDIgMTIuMTM4IDEuNTg4OTMgMTIuMDQ4MSAxLjU1MjU5QzExLjk1ODEgMS41MTYyNSAxMS44NjE3IDEuNDk4NCAxMS43NjQ3IDEuNTAwMTFDMTEuNjY3NyAxLjUwMTgyIDExLjU3MiAxLjUyMzA2IDExLjQ4MzQgMS41NjI1NUMxMS4zOTQ4IDEuNjAyMDQgMTEuMzE1IDEuNjU4OTggMTEuMjQ4OCAxLjcyOTk3TDYuOTkwNjcgNS45ODgxNEwyLjczMjUgMS43Mjk5N0MyLjU5NTUzIDEuNjAyMzQgMi40MTQzNyAxLjUzMjg2IDIuMjI3MTggMS41MzYxNkMyLjAzOTk5IDEuNTM5NDYgMS44NjE0IDEuNjE1MjkgMS43MjkwMSAxLjc0NzY3QzEuNTk2NjMgMS44ODAwNiAxLjUyMDggMi4wNTg2NSAxLjUxNzUgMi4yNDU4NEMxLjUxNDIgMi40MzMwMyAxLjU4MzY4IDIuNjE0MTkgMS43MTEzMSAyLjc1MTE2TDUuOTY5NDggNy4wMDkzM0wxLjcxMTMxIDExLjI2NzVDMS41NzYgMTEuNDAzIDEuNSAxMS41ODY2IDEuNSAxMS43NzgxQzEuNSAxMS45Njk2IDEuNTc2IDEyLjE1MzIgMS43MTEzMSAxMi4yODg3QzEuODQ2NzkgMTIuNDI0IDIuMDMwNDMgMTIuNSAyLjIyMTkgMTIuNUMyLjQxMzM4IDEyLjUgMi41OTcwMiAxMi40MjQgMi43MzI1IDEyLjI4ODdMNi45OTA2NyA4LjAzMDUyTDExLjI0ODggMTIuMjg4N0MxMS4zODQzIDEyLjQyNCAxMS41NjggMTIuNSAxMS43NTk0IDEyLjVDMTEuOTUwOSAxMi41IDEyLjEzNDYgMTIuNDI0IDEyLjI3IDEyLjI4ODdDMTIuNDA1MyAxMi4xNTMyIDEyLjQ4MTMgMTEuOTY5NiAxMi40ODEzIDExLjc3ODFDMTIuNDgxMyAxMS41ODY2IDEyLjQwNTMgMTEuNDAzIDEyLjI3IDExLjI2NzVMOC4wMTE4NiA3LjAwOTMzWlwiXG4gICAgICAgICAgZmlsbD1cImN1cnJlbnRDb2xvclwiPjwvcGF0aD5cbiAgICAgIDwvc3ZnPjwvYnV0dG9uPlxuICA8L2Rpdj5cbjwvZGl2PlxuIl19